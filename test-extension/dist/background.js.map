{
  "version": 3,
  "sources": ["../node_modules/webextension-polyfill/dist/browser-polyfill.js", "../../node_modules/webextension-polyfill/dist/browser-polyfill.js", "../../src/index.ts", "../../src/stateful-tab-frame-tracker.ts", "../../src/tab-frame-tracker.ts", "../../src/content-scripts/frame-monitor.ts", "../src/background.ts"],
  "sourcesContent": ["/* webextension-polyfill - v0.10.0 - Fri Aug 12 2022 19:42:44 */\n/* -*- Mode: indent-tabs-mode: nil; js-indent-level: 2 -*- */\n/* vim: set sts=2 sw=2 et tw=80: */\n/* This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/. */\n\"use strict\";\n\nif (!globalThis.chrome?.runtime?.id) {\n  throw new Error(\"This script should only be loaded in a browser extension.\");\n}\n\nif (typeof globalThis.browser === \"undefined\" || Object.getPrototypeOf(globalThis.browser) !== Object.prototype) {\n  const CHROME_SEND_MESSAGE_CALLBACK_NO_RESPONSE_MESSAGE = \"The message port closed before a response was received.\";\n\n  // Wrapping the bulk of this polyfill in a one-time-use function is a minor\n  // optimization for Firefox. Since Spidermonkey does not fully parse the\n  // contents of a function until the first time it's called, and since it will\n  // never actually need to be called, this allows the polyfill to be included\n  // in Firefox nearly for free.\n  const wrapAPIs = extensionAPIs => {\n    // NOTE: apiMetadata is associated to the content of the api-metadata.json file\n    // at build time by replacing the following \"include\" with the content of the\n    // JSON file.\n    const apiMetadata = {\n      \"alarms\": {\n        \"clear\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 1\n        },\n        \"clearAll\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        },\n        \"get\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 1\n        },\n        \"getAll\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        }\n      },\n      \"bookmarks\": {\n        \"create\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"get\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"getChildren\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"getRecent\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"getSubTree\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"getTree\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        },\n        \"move\": {\n          \"minArgs\": 2,\n          \"maxArgs\": 2\n        },\n        \"remove\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"removeTree\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"search\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"update\": {\n          \"minArgs\": 2,\n          \"maxArgs\": 2\n        }\n      },\n      \"browserAction\": {\n        \"disable\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 1,\n          \"fallbackToNoCallback\": true\n        },\n        \"enable\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 1,\n          \"fallbackToNoCallback\": true\n        },\n        \"getBadgeBackgroundColor\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"getBadgeText\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"getPopup\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"getTitle\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"openPopup\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        },\n        \"setBadgeBackgroundColor\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1,\n          \"fallbackToNoCallback\": true\n        },\n        \"setBadgeText\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1,\n          \"fallbackToNoCallback\": true\n        },\n        \"setIcon\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"setPopup\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1,\n          \"fallbackToNoCallback\": true\n        },\n        \"setTitle\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1,\n          \"fallbackToNoCallback\": true\n        }\n      },\n      \"browsingData\": {\n        \"remove\": {\n          \"minArgs\": 2,\n          \"maxArgs\": 2\n        },\n        \"removeCache\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"removeCookies\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"removeDownloads\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"removeFormData\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"removeHistory\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"removeLocalStorage\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"removePasswords\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"removePluginData\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"settings\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        }\n      },\n      \"commands\": {\n        \"getAll\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        }\n      },\n      \"contextMenus\": {\n        \"remove\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"removeAll\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        },\n        \"update\": {\n          \"minArgs\": 2,\n          \"maxArgs\": 2\n        }\n      },\n      \"cookies\": {\n        \"get\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"getAll\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"getAllCookieStores\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        },\n        \"remove\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"set\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        }\n      },\n      \"devtools\": {\n        \"inspectedWindow\": {\n          \"eval\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 2,\n            \"singleCallbackArg\": false\n          }\n        },\n        \"panels\": {\n          \"create\": {\n            \"minArgs\": 3,\n            \"maxArgs\": 3,\n            \"singleCallbackArg\": true\n          },\n          \"elements\": {\n            \"createSidebarPane\": {\n              \"minArgs\": 1,\n              \"maxArgs\": 1\n            }\n          }\n        }\n      },\n      \"downloads\": {\n        \"cancel\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"download\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"erase\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"getFileIcon\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 2\n        },\n        \"open\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1,\n          \"fallbackToNoCallback\": true\n        },\n        \"pause\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"removeFile\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"resume\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"search\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"show\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1,\n          \"fallbackToNoCallback\": true\n        }\n      },\n      \"extension\": {\n        \"isAllowedFileSchemeAccess\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        },\n        \"isAllowedIncognitoAccess\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        }\n      },\n      \"history\": {\n        \"addUrl\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"deleteAll\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        },\n        \"deleteRange\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"deleteUrl\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"getVisits\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"search\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        }\n      },\n      \"i18n\": {\n        \"detectLanguage\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"getAcceptLanguages\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        }\n      },\n      \"identity\": {\n        \"launchWebAuthFlow\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        }\n      },\n      \"idle\": {\n        \"queryState\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        }\n      },\n      \"management\": {\n        \"get\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"getAll\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        },\n        \"getSelf\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        },\n        \"setEnabled\": {\n          \"minArgs\": 2,\n          \"maxArgs\": 2\n        },\n        \"uninstallSelf\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 1\n        }\n      },\n      \"notifications\": {\n        \"clear\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"create\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 2\n        },\n        \"getAll\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        },\n        \"getPermissionLevel\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        },\n        \"update\": {\n          \"minArgs\": 2,\n          \"maxArgs\": 2\n        }\n      },\n      \"pageAction\": {\n        \"getPopup\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"getTitle\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"hide\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1,\n          \"fallbackToNoCallback\": true\n        },\n        \"setIcon\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"setPopup\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1,\n          \"fallbackToNoCallback\": true\n        },\n        \"setTitle\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1,\n          \"fallbackToNoCallback\": true\n        },\n        \"show\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1,\n          \"fallbackToNoCallback\": true\n        }\n      },\n      \"permissions\": {\n        \"contains\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"getAll\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        },\n        \"remove\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"request\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        }\n      },\n      \"runtime\": {\n        \"getBackgroundPage\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        },\n        \"getPlatformInfo\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        },\n        \"openOptionsPage\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        },\n        \"requestUpdateCheck\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        },\n        \"sendMessage\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 3\n        },\n        \"sendNativeMessage\": {\n          \"minArgs\": 2,\n          \"maxArgs\": 2\n        },\n        \"setUninstallURL\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        }\n      },\n      \"sessions\": {\n        \"getDevices\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 1\n        },\n        \"getRecentlyClosed\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 1\n        },\n        \"restore\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 1\n        }\n      },\n      \"storage\": {\n        \"local\": {\n          \"clear\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 0\n          },\n          \"get\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 1\n          },\n          \"getBytesInUse\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 1\n          },\n          \"remove\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"set\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          }\n        },\n        \"managed\": {\n          \"get\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 1\n          },\n          \"getBytesInUse\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 1\n          }\n        },\n        \"sync\": {\n          \"clear\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 0\n          },\n          \"get\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 1\n          },\n          \"getBytesInUse\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 1\n          },\n          \"remove\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"set\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          }\n        }\n      },\n      \"tabs\": {\n        \"captureVisibleTab\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 2\n        },\n        \"create\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"detectLanguage\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 1\n        },\n        \"discard\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 1\n        },\n        \"duplicate\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"executeScript\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 2\n        },\n        \"get\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"getCurrent\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        },\n        \"getZoom\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 1\n        },\n        \"getZoomSettings\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 1\n        },\n        \"goBack\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 1\n        },\n        \"goForward\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 1\n        },\n        \"highlight\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"insertCSS\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 2\n        },\n        \"move\": {\n          \"minArgs\": 2,\n          \"maxArgs\": 2\n        },\n        \"query\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"reload\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 2\n        },\n        \"remove\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"removeCSS\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 2\n        },\n        \"sendMessage\": {\n          \"minArgs\": 2,\n          \"maxArgs\": 3\n        },\n        \"setZoom\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 2\n        },\n        \"setZoomSettings\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 2\n        },\n        \"update\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 2\n        }\n      },\n      \"topSites\": {\n        \"get\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        }\n      },\n      \"webNavigation\": {\n        \"getAllFrames\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"getFrame\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        }\n      },\n      \"webRequest\": {\n        \"handlerBehaviorChanged\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        }\n      },\n      \"windows\": {\n        \"create\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 1\n        },\n        \"get\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 2\n        },\n        \"getAll\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 1\n        },\n        \"getCurrent\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 1\n        },\n        \"getLastFocused\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 1\n        },\n        \"remove\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"update\": {\n          \"minArgs\": 2,\n          \"maxArgs\": 2\n        }\n      }\n    };\n\n    if (Object.keys(apiMetadata).length === 0) {\n      throw new Error(\"api-metadata.json has not been included in browser-polyfill\");\n    }\n\n    /**\n     * A WeakMap subclass which creates and stores a value for any key which does\n     * not exist when accessed, but behaves exactly as an ordinary WeakMap\n     * otherwise.\n     *\n     * @param {function} createItem\n     *        A function which will be called in order to create the value for any\n     *        key which does not exist, the first time it is accessed. The\n     *        function receives, as its only argument, the key being created.\n     */\n    class DefaultWeakMap extends WeakMap {\n      constructor(createItem, items = undefined) {\n        super(items);\n        this.createItem = createItem;\n      }\n\n      get(key) {\n        if (!this.has(key)) {\n          this.set(key, this.createItem(key));\n        }\n\n        return super.get(key);\n      }\n    }\n\n    /**\n     * Returns true if the given object is an object with a `then` method, and can\n     * therefore be assumed to behave as a Promise.\n     *\n     * @param {*} value The value to test.\n     * @returns {boolean} True if the value is thenable.\n     */\n    const isThenable = value => {\n      return value && typeof value === \"object\" && typeof value.then === \"function\";\n    };\n\n    /**\n     * Creates and returns a function which, when called, will resolve or reject\n     * the given promise based on how it is called:\n     *\n     * - If, when called, `chrome.runtime.lastError` contains a non-null object,\n     *   the promise is rejected with that value.\n     * - If the function is called with exactly one argument, the promise is\n     *   resolved to that value.\n     * - Otherwise, the promise is resolved to an array containing all of the\n     *   function's arguments.\n     *\n     * @param {object} promise\n     *        An object containing the resolution and rejection functions of a\n     *        promise.\n     * @param {function} promise.resolve\n     *        The promise's resolution function.\n     * @param {function} promise.reject\n     *        The promise's rejection function.\n     * @param {object} metadata\n     *        Metadata about the wrapped method which has created the callback.\n     * @param {boolean} metadata.singleCallbackArg\n     *        Whether or not the promise is resolved with only the first\n     *        argument of the callback, alternatively an array of all the\n     *        callback arguments is resolved. By default, if the callback\n     *        function is invoked with only a single argument, that will be\n     *        resolved to the promise, while all arguments will be resolved as\n     *        an array if multiple are given.\n     *\n     * @returns {function}\n     *        The generated callback function.\n     */\n    const makeCallback = (promise, metadata) => {\n      return (...callbackArgs) => {\n        if (extensionAPIs.runtime.lastError) {\n          promise.reject(new Error(extensionAPIs.runtime.lastError.message));\n        } else if (metadata.singleCallbackArg ||\n                   (callbackArgs.length <= 1 && metadata.singleCallbackArg !== false)) {\n          promise.resolve(callbackArgs[0]);\n        } else {\n          promise.resolve(callbackArgs);\n        }\n      };\n    };\n\n    const pluralizeArguments = (numArgs) => numArgs == 1 ? \"argument\" : \"arguments\";\n\n    /**\n     * Creates a wrapper function for a method with the given name and metadata.\n     *\n     * @param {string} name\n     *        The name of the method which is being wrapped.\n     * @param {object} metadata\n     *        Metadata about the method being wrapped.\n     * @param {integer} metadata.minArgs\n     *        The minimum number of arguments which must be passed to the\n     *        function. If called with fewer than this number of arguments, the\n     *        wrapper will raise an exception.\n     * @param {integer} metadata.maxArgs\n     *        The maximum number of arguments which may be passed to the\n     *        function. If called with more than this number of arguments, the\n     *        wrapper will raise an exception.\n     * @param {boolean} metadata.singleCallbackArg\n     *        Whether or not the promise is resolved with only the first\n     *        argument of the callback, alternatively an array of all the\n     *        callback arguments is resolved. By default, if the callback\n     *        function is invoked with only a single argument, that will be\n     *        resolved to the promise, while all arguments will be resolved as\n     *        an array if multiple are given.\n     *\n     * @returns {function(object, ...*)}\n     *       The generated wrapper function.\n     */\n    const wrapAsyncFunction = (name, metadata) => {\n      return function asyncFunctionWrapper(target, ...args) {\n        if (args.length < metadata.minArgs) {\n          throw new Error(`Expected at least ${metadata.minArgs} ${pluralizeArguments(metadata.minArgs)} for ${name}(), got ${args.length}`);\n        }\n\n        if (args.length > metadata.maxArgs) {\n          throw new Error(`Expected at most ${metadata.maxArgs} ${pluralizeArguments(metadata.maxArgs)} for ${name}(), got ${args.length}`);\n        }\n\n        return new Promise((resolve, reject) => {\n          if (metadata.fallbackToNoCallback) {\n            // This API method has currently no callback on Chrome, but it return a promise on Firefox,\n            // and so the polyfill will try to call it with a callback first, and it will fallback\n            // to not passing the callback if the first call fails.\n            try {\n              target[name](...args, makeCallback({resolve, reject}, metadata));\n            } catch (cbError) {\n              console.warn(`${name} API method doesn't seem to support the callback parameter, ` +\n                           \"falling back to call it without a callback: \", cbError);\n\n              target[name](...args);\n\n              // Update the API method metadata, so that the next API calls will not try to\n              // use the unsupported callback anymore.\n              metadata.fallbackToNoCallback = false;\n              metadata.noCallback = true;\n\n              resolve();\n            }\n          } else if (metadata.noCallback) {\n            target[name](...args);\n            resolve();\n          } else {\n            target[name](...args, makeCallback({resolve, reject}, metadata));\n          }\n        });\n      };\n    };\n\n    /**\n     * Wraps an existing method of the target object, so that calls to it are\n     * intercepted by the given wrapper function. The wrapper function receives,\n     * as its first argument, the original `target` object, followed by each of\n     * the arguments passed to the original method.\n     *\n     * @param {object} target\n     *        The original target object that the wrapped method belongs to.\n     * @param {function} method\n     *        The method being wrapped. This is used as the target of the Proxy\n     *        object which is created to wrap the method.\n     * @param {function} wrapper\n     *        The wrapper function which is called in place of a direct invocation\n     *        of the wrapped method.\n     *\n     * @returns {Proxy<function>}\n     *        A Proxy object for the given method, which invokes the given wrapper\n     *        method in its place.\n     */\n    const wrapMethod = (target, method, wrapper) => {\n      return new Proxy(method, {\n        apply(targetMethod, thisObj, args) {\n          return wrapper.call(thisObj, target, ...args);\n        },\n      });\n    };\n\n    let hasOwnProperty = Function.call.bind(Object.prototype.hasOwnProperty);\n\n    /**\n     * Wraps an object in a Proxy which intercepts and wraps certain methods\n     * based on the given `wrappers` and `metadata` objects.\n     *\n     * @param {object} target\n     *        The target object to wrap.\n     *\n     * @param {object} [wrappers = {}]\n     *        An object tree containing wrapper functions for special cases. Any\n     *        function present in this object tree is called in place of the\n     *        method in the same location in the `target` object tree. These\n     *        wrapper methods are invoked as described in {@see wrapMethod}.\n     *\n     * @param {object} [metadata = {}]\n     *        An object tree containing metadata used to automatically generate\n     *        Promise-based wrapper functions for asynchronous. Any function in\n     *        the `target` object tree which has a corresponding metadata object\n     *        in the same location in the `metadata` tree is replaced with an\n     *        automatically-generated wrapper function, as described in\n     *        {@see wrapAsyncFunction}\n     *\n     * @returns {Proxy<object>}\n     */\n    const wrapObject = (target, wrappers = {}, metadata = {}) => {\n      let cache = Object.create(null);\n      let handlers = {\n        has(proxyTarget, prop) {\n          return prop in target || prop in cache;\n        },\n\n        get(proxyTarget, prop, receiver) {\n          if (prop in cache) {\n            return cache[prop];\n          }\n\n          if (!(prop in target)) {\n            return undefined;\n          }\n\n          let value = target[prop];\n\n          if (typeof value === \"function\") {\n            // This is a method on the underlying object. Check if we need to do\n            // any wrapping.\n\n            if (typeof wrappers[prop] === \"function\") {\n              // We have a special-case wrapper for this method.\n              value = wrapMethod(target, target[prop], wrappers[prop]);\n            } else if (hasOwnProperty(metadata, prop)) {\n              // This is an async method that we have metadata for. Create a\n              // Promise wrapper for it.\n              let wrapper = wrapAsyncFunction(prop, metadata[prop]);\n              value = wrapMethod(target, target[prop], wrapper);\n            } else {\n              // This is a method that we don't know or care about. Return the\n              // original method, bound to the underlying object.\n              value = value.bind(target);\n            }\n          } else if (typeof value === \"object\" && value !== null &&\n                     (hasOwnProperty(wrappers, prop) ||\n                      hasOwnProperty(metadata, prop))) {\n            // This is an object that we need to do some wrapping for the children\n            // of. Create a sub-object wrapper for it with the appropriate child\n            // metadata.\n            value = wrapObject(value, wrappers[prop], metadata[prop]);\n          } else if (hasOwnProperty(metadata, \"*\")) {\n            // Wrap all properties in * namespace.\n            value = wrapObject(value, wrappers[prop], metadata[\"*\"]);\n          } else {\n            // We don't need to do any wrapping for this property,\n            // so just forward all access to the underlying object.\n            Object.defineProperty(cache, prop, {\n              configurable: true,\n              enumerable: true,\n              get() {\n                return target[prop];\n              },\n              set(value) {\n                target[prop] = value;\n              },\n            });\n\n            return value;\n          }\n\n          cache[prop] = value;\n          return value;\n        },\n\n        set(proxyTarget, prop, value, receiver) {\n          if (prop in cache) {\n            cache[prop] = value;\n          } else {\n            target[prop] = value;\n          }\n          return true;\n        },\n\n        defineProperty(proxyTarget, prop, desc) {\n          return Reflect.defineProperty(cache, prop, desc);\n        },\n\n        deleteProperty(proxyTarget, prop) {\n          return Reflect.deleteProperty(cache, prop);\n        },\n      };\n\n      // Per contract of the Proxy API, the \"get\" proxy handler must return the\n      // original value of the target if that value is declared read-only and\n      // non-configurable. For this reason, we create an object with the\n      // prototype set to `target` instead of using `target` directly.\n      // Otherwise we cannot return a custom object for APIs that\n      // are declared read-only and non-configurable, such as `chrome.devtools`.\n      //\n      // The proxy handlers themselves will still use the original `target`\n      // instead of the `proxyTarget`, so that the methods and properties are\n      // dereferenced via the original targets.\n      let proxyTarget = Object.create(target);\n      return new Proxy(proxyTarget, handlers);\n    };\n\n    /**\n     * Creates a set of wrapper functions for an event object, which handles\n     * wrapping of listener functions that those messages are passed.\n     *\n     * A single wrapper is created for each listener function, and stored in a\n     * map. Subsequent calls to `addListener`, `hasListener`, or `removeListener`\n     * retrieve the original wrapper, so that  attempts to remove a\n     * previously-added listener work as expected.\n     *\n     * @param {DefaultWeakMap<function, function>} wrapperMap\n     *        A DefaultWeakMap object which will create the appropriate wrapper\n     *        for a given listener function when one does not exist, and retrieve\n     *        an existing one when it does.\n     *\n     * @returns {object}\n     */\n    const wrapEvent = wrapperMap => ({\n      addListener(target, listener, ...args) {\n        target.addListener(wrapperMap.get(listener), ...args);\n      },\n\n      hasListener(target, listener) {\n        return target.hasListener(wrapperMap.get(listener));\n      },\n\n      removeListener(target, listener) {\n        target.removeListener(wrapperMap.get(listener));\n      },\n    });\n\n    const onRequestFinishedWrappers = new DefaultWeakMap(listener => {\n      if (typeof listener !== \"function\") {\n        return listener;\n      }\n\n      /**\n       * Wraps an onRequestFinished listener function so that it will return a\n       * `getContent()` property which returns a `Promise` rather than using a\n       * callback API.\n       *\n       * @param {object} req\n       *        The HAR entry object representing the network request.\n       */\n      return function onRequestFinished(req) {\n        const wrappedReq = wrapObject(req, {} /* wrappers */, {\n          getContent: {\n            minArgs: 0,\n            maxArgs: 0,\n          },\n        });\n        listener(wrappedReq);\n      };\n    });\n\n    const onMessageWrappers = new DefaultWeakMap(listener => {\n      if (typeof listener !== \"function\") {\n        return listener;\n      }\n\n      /**\n       * Wraps a message listener function so that it may send responses based on\n       * its return value, rather than by returning a sentinel value and calling a\n       * callback. If the listener function returns a Promise, the response is\n       * sent when the promise either resolves or rejects.\n       *\n       * @param {*} message\n       *        The message sent by the other end of the channel.\n       * @param {object} sender\n       *        Details about the sender of the message.\n       * @param {function(*)} sendResponse\n       *        A callback which, when called with an arbitrary argument, sends\n       *        that value as a response.\n       * @returns {boolean}\n       *        True if the wrapped listener returned a Promise, which will later\n       *        yield a response. False otherwise.\n       */\n      return function onMessage(message, sender, sendResponse) {\n        let didCallSendResponse = false;\n\n        let wrappedSendResponse;\n        let sendResponsePromise = new Promise(resolve => {\n          wrappedSendResponse = function(response) {\n            didCallSendResponse = true;\n            resolve(response);\n          };\n        });\n\n        let result;\n        try {\n          result = listener(message, sender, wrappedSendResponse);\n        } catch (err) {\n          result = Promise.reject(err);\n        }\n\n        const isResultThenable = result !== true && isThenable(result);\n\n        // If the listener didn't returned true or a Promise, or called\n        // wrappedSendResponse synchronously, we can exit earlier\n        // because there will be no response sent from this listener.\n        if (result !== true && !isResultThenable && !didCallSendResponse) {\n          return false;\n        }\n\n        // A small helper to send the message if the promise resolves\n        // and an error if the promise rejects (a wrapped sendMessage has\n        // to translate the message into a resolved promise or a rejected\n        // promise).\n        const sendPromisedResult = (promise) => {\n          promise.then(msg => {\n            // send the message value.\n            sendResponse(msg);\n          }, error => {\n            // Send a JSON representation of the error if the rejected value\n            // is an instance of error, or the object itself otherwise.\n            let message;\n            if (error && (error instanceof Error ||\n                typeof error.message === \"string\")) {\n              message = error.message;\n            } else {\n              message = \"An unexpected error occurred\";\n            }\n\n            sendResponse({\n              __mozWebExtensionPolyfillReject__: true,\n              message,\n            });\n          }).catch(err => {\n            // Print an error on the console if unable to send the response.\n            console.error(\"Failed to send onMessage rejected reply\", err);\n          });\n        };\n\n        // If the listener returned a Promise, send the resolved value as a\n        // result, otherwise wait the promise related to the wrappedSendResponse\n        // callback to resolve and send it as a response.\n        if (isResultThenable) {\n          sendPromisedResult(result);\n        } else {\n          sendPromisedResult(sendResponsePromise);\n        }\n\n        // Let Chrome know that the listener is replying.\n        return true;\n      };\n    });\n\n    const wrappedSendMessageCallback = ({reject, resolve}, reply) => {\n      if (extensionAPIs.runtime.lastError) {\n        // Detect when none of the listeners replied to the sendMessage call and resolve\n        // the promise to undefined as in Firefox.\n        // See https://github.com/mozilla/webextension-polyfill/issues/130\n        if (extensionAPIs.runtime.lastError.message === CHROME_SEND_MESSAGE_CALLBACK_NO_RESPONSE_MESSAGE) {\n          resolve();\n        } else {\n          reject(new Error(extensionAPIs.runtime.lastError.message));\n        }\n      } else if (reply && reply.__mozWebExtensionPolyfillReject__) {\n        // Convert back the JSON representation of the error into\n        // an Error instance.\n        reject(new Error(reply.message));\n      } else {\n        resolve(reply);\n      }\n    };\n\n    const wrappedSendMessage = (name, metadata, apiNamespaceObj, ...args) => {\n      if (args.length < metadata.minArgs) {\n        throw new Error(`Expected at least ${metadata.minArgs} ${pluralizeArguments(metadata.minArgs)} for ${name}(), got ${args.length}`);\n      }\n\n      if (args.length > metadata.maxArgs) {\n        throw new Error(`Expected at most ${metadata.maxArgs} ${pluralizeArguments(metadata.maxArgs)} for ${name}(), got ${args.length}`);\n      }\n\n      return new Promise((resolve, reject) => {\n        const wrappedCb = wrappedSendMessageCallback.bind(null, {resolve, reject});\n        args.push(wrappedCb);\n        apiNamespaceObj.sendMessage(...args);\n      });\n    };\n\n    const staticWrappers = {\n      devtools: {\n        network: {\n          onRequestFinished: wrapEvent(onRequestFinishedWrappers),\n        },\n      },\n      runtime: {\n        onMessage: wrapEvent(onMessageWrappers),\n        onMessageExternal: wrapEvent(onMessageWrappers),\n        sendMessage: wrappedSendMessage.bind(null, \"sendMessage\", {minArgs: 1, maxArgs: 3}),\n      },\n      tabs: {\n        sendMessage: wrappedSendMessage.bind(null, \"sendMessage\", {minArgs: 2, maxArgs: 3}),\n      },\n    };\n    const settingMetadata = {\n      clear: {minArgs: 1, maxArgs: 1},\n      get: {minArgs: 1, maxArgs: 1},\n      set: {minArgs: 1, maxArgs: 1},\n    };\n    apiMetadata.privacy = {\n      network: {\"*\": settingMetadata},\n      services: {\"*\": settingMetadata},\n      websites: {\"*\": settingMetadata},\n    };\n\n    return wrapObject(extensionAPIs, staticWrappers, apiMetadata);\n  };\n\n  // The build process adds a UMD wrapper around this file, which makes the\n  // `module` variable available.\n  module.exports = wrapAPIs(chrome);\n} else {\n  module.exports = globalThis.browser;\n}\n", "/* webextension-polyfill - v0.10.0 - Fri Aug 12 2022 19:42:44 */\n/* -*- Mode: indent-tabs-mode: nil; js-indent-level: 2 -*- */\n/* vim: set sts=2 sw=2 et tw=80: */\n/* This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/. */\n\"use strict\";\n\nif (!globalThis.chrome?.runtime?.id) {\n  throw new Error(\"This script should only be loaded in a browser extension.\");\n}\n\nif (typeof globalThis.browser === \"undefined\" || Object.getPrototypeOf(globalThis.browser) !== Object.prototype) {\n  const CHROME_SEND_MESSAGE_CALLBACK_NO_RESPONSE_MESSAGE = \"The message port closed before a response was received.\";\n\n  // Wrapping the bulk of this polyfill in a one-time-use function is a minor\n  // optimization for Firefox. Since Spidermonkey does not fully parse the\n  // contents of a function until the first time it's called, and since it will\n  // never actually need to be called, this allows the polyfill to be included\n  // in Firefox nearly for free.\n  const wrapAPIs = extensionAPIs => {\n    // NOTE: apiMetadata is associated to the content of the api-metadata.json file\n    // at build time by replacing the following \"include\" with the content of the\n    // JSON file.\n    const apiMetadata = {\n      \"alarms\": {\n        \"clear\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 1\n        },\n        \"clearAll\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        },\n        \"get\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 1\n        },\n        \"getAll\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        }\n      },\n      \"bookmarks\": {\n        \"create\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"get\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"getChildren\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"getRecent\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"getSubTree\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"getTree\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        },\n        \"move\": {\n          \"minArgs\": 2,\n          \"maxArgs\": 2\n        },\n        \"remove\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"removeTree\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"search\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"update\": {\n          \"minArgs\": 2,\n          \"maxArgs\": 2\n        }\n      },\n      \"browserAction\": {\n        \"disable\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 1,\n          \"fallbackToNoCallback\": true\n        },\n        \"enable\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 1,\n          \"fallbackToNoCallback\": true\n        },\n        \"getBadgeBackgroundColor\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"getBadgeText\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"getPopup\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"getTitle\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"openPopup\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        },\n        \"setBadgeBackgroundColor\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1,\n          \"fallbackToNoCallback\": true\n        },\n        \"setBadgeText\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1,\n          \"fallbackToNoCallback\": true\n        },\n        \"setIcon\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"setPopup\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1,\n          \"fallbackToNoCallback\": true\n        },\n        \"setTitle\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1,\n          \"fallbackToNoCallback\": true\n        }\n      },\n      \"browsingData\": {\n        \"remove\": {\n          \"minArgs\": 2,\n          \"maxArgs\": 2\n        },\n        \"removeCache\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"removeCookies\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"removeDownloads\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"removeFormData\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"removeHistory\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"removeLocalStorage\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"removePasswords\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"removePluginData\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"settings\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        }\n      },\n      \"commands\": {\n        \"getAll\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        }\n      },\n      \"contextMenus\": {\n        \"remove\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"removeAll\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        },\n        \"update\": {\n          \"minArgs\": 2,\n          \"maxArgs\": 2\n        }\n      },\n      \"cookies\": {\n        \"get\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"getAll\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"getAllCookieStores\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        },\n        \"remove\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"set\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        }\n      },\n      \"devtools\": {\n        \"inspectedWindow\": {\n          \"eval\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 2,\n            \"singleCallbackArg\": false\n          }\n        },\n        \"panels\": {\n          \"create\": {\n            \"minArgs\": 3,\n            \"maxArgs\": 3,\n            \"singleCallbackArg\": true\n          },\n          \"elements\": {\n            \"createSidebarPane\": {\n              \"minArgs\": 1,\n              \"maxArgs\": 1\n            }\n          }\n        }\n      },\n      \"downloads\": {\n        \"cancel\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"download\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"erase\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"getFileIcon\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 2\n        },\n        \"open\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1,\n          \"fallbackToNoCallback\": true\n        },\n        \"pause\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"removeFile\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"resume\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"search\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"show\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1,\n          \"fallbackToNoCallback\": true\n        }\n      },\n      \"extension\": {\n        \"isAllowedFileSchemeAccess\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        },\n        \"isAllowedIncognitoAccess\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        }\n      },\n      \"history\": {\n        \"addUrl\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"deleteAll\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        },\n        \"deleteRange\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"deleteUrl\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"getVisits\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"search\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        }\n      },\n      \"i18n\": {\n        \"detectLanguage\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"getAcceptLanguages\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        }\n      },\n      \"identity\": {\n        \"launchWebAuthFlow\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        }\n      },\n      \"idle\": {\n        \"queryState\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        }\n      },\n      \"management\": {\n        \"get\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"getAll\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        },\n        \"getSelf\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        },\n        \"setEnabled\": {\n          \"minArgs\": 2,\n          \"maxArgs\": 2\n        },\n        \"uninstallSelf\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 1\n        }\n      },\n      \"notifications\": {\n        \"clear\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"create\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 2\n        },\n        \"getAll\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        },\n        \"getPermissionLevel\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        },\n        \"update\": {\n          \"minArgs\": 2,\n          \"maxArgs\": 2\n        }\n      },\n      \"pageAction\": {\n        \"getPopup\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"getTitle\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"hide\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1,\n          \"fallbackToNoCallback\": true\n        },\n        \"setIcon\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"setPopup\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1,\n          \"fallbackToNoCallback\": true\n        },\n        \"setTitle\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1,\n          \"fallbackToNoCallback\": true\n        },\n        \"show\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1,\n          \"fallbackToNoCallback\": true\n        }\n      },\n      \"permissions\": {\n        \"contains\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"getAll\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        },\n        \"remove\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"request\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        }\n      },\n      \"runtime\": {\n        \"getBackgroundPage\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        },\n        \"getPlatformInfo\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        },\n        \"openOptionsPage\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        },\n        \"requestUpdateCheck\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        },\n        \"sendMessage\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 3\n        },\n        \"sendNativeMessage\": {\n          \"minArgs\": 2,\n          \"maxArgs\": 2\n        },\n        \"setUninstallURL\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        }\n      },\n      \"sessions\": {\n        \"getDevices\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 1\n        },\n        \"getRecentlyClosed\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 1\n        },\n        \"restore\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 1\n        }\n      },\n      \"storage\": {\n        \"local\": {\n          \"clear\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 0\n          },\n          \"get\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 1\n          },\n          \"getBytesInUse\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 1\n          },\n          \"remove\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"set\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          }\n        },\n        \"managed\": {\n          \"get\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 1\n          },\n          \"getBytesInUse\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 1\n          }\n        },\n        \"sync\": {\n          \"clear\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 0\n          },\n          \"get\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 1\n          },\n          \"getBytesInUse\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 1\n          },\n          \"remove\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"set\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          }\n        }\n      },\n      \"tabs\": {\n        \"captureVisibleTab\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 2\n        },\n        \"create\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"detectLanguage\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 1\n        },\n        \"discard\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 1\n        },\n        \"duplicate\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"executeScript\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 2\n        },\n        \"get\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"getCurrent\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        },\n        \"getZoom\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 1\n        },\n        \"getZoomSettings\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 1\n        },\n        \"goBack\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 1\n        },\n        \"goForward\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 1\n        },\n        \"highlight\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"insertCSS\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 2\n        },\n        \"move\": {\n          \"minArgs\": 2,\n          \"maxArgs\": 2\n        },\n        \"query\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"reload\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 2\n        },\n        \"remove\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"removeCSS\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 2\n        },\n        \"sendMessage\": {\n          \"minArgs\": 2,\n          \"maxArgs\": 3\n        },\n        \"setZoom\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 2\n        },\n        \"setZoomSettings\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 2\n        },\n        \"update\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 2\n        }\n      },\n      \"topSites\": {\n        \"get\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        }\n      },\n      \"webNavigation\": {\n        \"getAllFrames\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"getFrame\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        }\n      },\n      \"webRequest\": {\n        \"handlerBehaviorChanged\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        }\n      },\n      \"windows\": {\n        \"create\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 1\n        },\n        \"get\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 2\n        },\n        \"getAll\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 1\n        },\n        \"getCurrent\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 1\n        },\n        \"getLastFocused\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 1\n        },\n        \"remove\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"update\": {\n          \"minArgs\": 2,\n          \"maxArgs\": 2\n        }\n      }\n    };\n\n    if (Object.keys(apiMetadata).length === 0) {\n      throw new Error(\"api-metadata.json has not been included in browser-polyfill\");\n    }\n\n    /**\n     * A WeakMap subclass which creates and stores a value for any key which does\n     * not exist when accessed, but behaves exactly as an ordinary WeakMap\n     * otherwise.\n     *\n     * @param {function} createItem\n     *        A function which will be called in order to create the value for any\n     *        key which does not exist, the first time it is accessed. The\n     *        function receives, as its only argument, the key being created.\n     */\n    class DefaultWeakMap extends WeakMap {\n      constructor(createItem, items = undefined) {\n        super(items);\n        this.createItem = createItem;\n      }\n\n      get(key) {\n        if (!this.has(key)) {\n          this.set(key, this.createItem(key));\n        }\n\n        return super.get(key);\n      }\n    }\n\n    /**\n     * Returns true if the given object is an object with a `then` method, and can\n     * therefore be assumed to behave as a Promise.\n     *\n     * @param {*} value The value to test.\n     * @returns {boolean} True if the value is thenable.\n     */\n    const isThenable = value => {\n      return value && typeof value === \"object\" && typeof value.then === \"function\";\n    };\n\n    /**\n     * Creates and returns a function which, when called, will resolve or reject\n     * the given promise based on how it is called:\n     *\n     * - If, when called, `chrome.runtime.lastError` contains a non-null object,\n     *   the promise is rejected with that value.\n     * - If the function is called with exactly one argument, the promise is\n     *   resolved to that value.\n     * - Otherwise, the promise is resolved to an array containing all of the\n     *   function's arguments.\n     *\n     * @param {object} promise\n     *        An object containing the resolution and rejection functions of a\n     *        promise.\n     * @param {function} promise.resolve\n     *        The promise's resolution function.\n     * @param {function} promise.reject\n     *        The promise's rejection function.\n     * @param {object} metadata\n     *        Metadata about the wrapped method which has created the callback.\n     * @param {boolean} metadata.singleCallbackArg\n     *        Whether or not the promise is resolved with only the first\n     *        argument of the callback, alternatively an array of all the\n     *        callback arguments is resolved. By default, if the callback\n     *        function is invoked with only a single argument, that will be\n     *        resolved to the promise, while all arguments will be resolved as\n     *        an array if multiple are given.\n     *\n     * @returns {function}\n     *        The generated callback function.\n     */\n    const makeCallback = (promise, metadata) => {\n      return (...callbackArgs) => {\n        if (extensionAPIs.runtime.lastError) {\n          promise.reject(new Error(extensionAPIs.runtime.lastError.message));\n        } else if (metadata.singleCallbackArg ||\n                   (callbackArgs.length <= 1 && metadata.singleCallbackArg !== false)) {\n          promise.resolve(callbackArgs[0]);\n        } else {\n          promise.resolve(callbackArgs);\n        }\n      };\n    };\n\n    const pluralizeArguments = (numArgs) => numArgs == 1 ? \"argument\" : \"arguments\";\n\n    /**\n     * Creates a wrapper function for a method with the given name and metadata.\n     *\n     * @param {string} name\n     *        The name of the method which is being wrapped.\n     * @param {object} metadata\n     *        Metadata about the method being wrapped.\n     * @param {integer} metadata.minArgs\n     *        The minimum number of arguments which must be passed to the\n     *        function. If called with fewer than this number of arguments, the\n     *        wrapper will raise an exception.\n     * @param {integer} metadata.maxArgs\n     *        The maximum number of arguments which may be passed to the\n     *        function. If called with more than this number of arguments, the\n     *        wrapper will raise an exception.\n     * @param {boolean} metadata.singleCallbackArg\n     *        Whether or not the promise is resolved with only the first\n     *        argument of the callback, alternatively an array of all the\n     *        callback arguments is resolved. By default, if the callback\n     *        function is invoked with only a single argument, that will be\n     *        resolved to the promise, while all arguments will be resolved as\n     *        an array if multiple are given.\n     *\n     * @returns {function(object, ...*)}\n     *       The generated wrapper function.\n     */\n    const wrapAsyncFunction = (name, metadata) => {\n      return function asyncFunctionWrapper(target, ...args) {\n        if (args.length < metadata.minArgs) {\n          throw new Error(`Expected at least ${metadata.minArgs} ${pluralizeArguments(metadata.minArgs)} for ${name}(), got ${args.length}`);\n        }\n\n        if (args.length > metadata.maxArgs) {\n          throw new Error(`Expected at most ${metadata.maxArgs} ${pluralizeArguments(metadata.maxArgs)} for ${name}(), got ${args.length}`);\n        }\n\n        return new Promise((resolve, reject) => {\n          if (metadata.fallbackToNoCallback) {\n            // This API method has currently no callback on Chrome, but it return a promise on Firefox,\n            // and so the polyfill will try to call it with a callback first, and it will fallback\n            // to not passing the callback if the first call fails.\n            try {\n              target[name](...args, makeCallback({resolve, reject}, metadata));\n            } catch (cbError) {\n              console.warn(`${name} API method doesn't seem to support the callback parameter, ` +\n                           \"falling back to call it without a callback: \", cbError);\n\n              target[name](...args);\n\n              // Update the API method metadata, so that the next API calls will not try to\n              // use the unsupported callback anymore.\n              metadata.fallbackToNoCallback = false;\n              metadata.noCallback = true;\n\n              resolve();\n            }\n          } else if (metadata.noCallback) {\n            target[name](...args);\n            resolve();\n          } else {\n            target[name](...args, makeCallback({resolve, reject}, metadata));\n          }\n        });\n      };\n    };\n\n    /**\n     * Wraps an existing method of the target object, so that calls to it are\n     * intercepted by the given wrapper function. The wrapper function receives,\n     * as its first argument, the original `target` object, followed by each of\n     * the arguments passed to the original method.\n     *\n     * @param {object} target\n     *        The original target object that the wrapped method belongs to.\n     * @param {function} method\n     *        The method being wrapped. This is used as the target of the Proxy\n     *        object which is created to wrap the method.\n     * @param {function} wrapper\n     *        The wrapper function which is called in place of a direct invocation\n     *        of the wrapped method.\n     *\n     * @returns {Proxy<function>}\n     *        A Proxy object for the given method, which invokes the given wrapper\n     *        method in its place.\n     */\n    const wrapMethod = (target, method, wrapper) => {\n      return new Proxy(method, {\n        apply(targetMethod, thisObj, args) {\n          return wrapper.call(thisObj, target, ...args);\n        },\n      });\n    };\n\n    let hasOwnProperty = Function.call.bind(Object.prototype.hasOwnProperty);\n\n    /**\n     * Wraps an object in a Proxy which intercepts and wraps certain methods\n     * based on the given `wrappers` and `metadata` objects.\n     *\n     * @param {object} target\n     *        The target object to wrap.\n     *\n     * @param {object} [wrappers = {}]\n     *        An object tree containing wrapper functions for special cases. Any\n     *        function present in this object tree is called in place of the\n     *        method in the same location in the `target` object tree. These\n     *        wrapper methods are invoked as described in {@see wrapMethod}.\n     *\n     * @param {object} [metadata = {}]\n     *        An object tree containing metadata used to automatically generate\n     *        Promise-based wrapper functions for asynchronous. Any function in\n     *        the `target` object tree which has a corresponding metadata object\n     *        in the same location in the `metadata` tree is replaced with an\n     *        automatically-generated wrapper function, as described in\n     *        {@see wrapAsyncFunction}\n     *\n     * @returns {Proxy<object>}\n     */\n    const wrapObject = (target, wrappers = {}, metadata = {}) => {\n      let cache = Object.create(null);\n      let handlers = {\n        has(proxyTarget, prop) {\n          return prop in target || prop in cache;\n        },\n\n        get(proxyTarget, prop, receiver) {\n          if (prop in cache) {\n            return cache[prop];\n          }\n\n          if (!(prop in target)) {\n            return undefined;\n          }\n\n          let value = target[prop];\n\n          if (typeof value === \"function\") {\n            // This is a method on the underlying object. Check if we need to do\n            // any wrapping.\n\n            if (typeof wrappers[prop] === \"function\") {\n              // We have a special-case wrapper for this method.\n              value = wrapMethod(target, target[prop], wrappers[prop]);\n            } else if (hasOwnProperty(metadata, prop)) {\n              // This is an async method that we have metadata for. Create a\n              // Promise wrapper for it.\n              let wrapper = wrapAsyncFunction(prop, metadata[prop]);\n              value = wrapMethod(target, target[prop], wrapper);\n            } else {\n              // This is a method that we don't know or care about. Return the\n              // original method, bound to the underlying object.\n              value = value.bind(target);\n            }\n          } else if (typeof value === \"object\" && value !== null &&\n                     (hasOwnProperty(wrappers, prop) ||\n                      hasOwnProperty(metadata, prop))) {\n            // This is an object that we need to do some wrapping for the children\n            // of. Create a sub-object wrapper for it with the appropriate child\n            // metadata.\n            value = wrapObject(value, wrappers[prop], metadata[prop]);\n          } else if (hasOwnProperty(metadata, \"*\")) {\n            // Wrap all properties in * namespace.\n            value = wrapObject(value, wrappers[prop], metadata[\"*\"]);\n          } else {\n            // We don't need to do any wrapping for this property,\n            // so just forward all access to the underlying object.\n            Object.defineProperty(cache, prop, {\n              configurable: true,\n              enumerable: true,\n              get() {\n                return target[prop];\n              },\n              set(value) {\n                target[prop] = value;\n              },\n            });\n\n            return value;\n          }\n\n          cache[prop] = value;\n          return value;\n        },\n\n        set(proxyTarget, prop, value, receiver) {\n          if (prop in cache) {\n            cache[prop] = value;\n          } else {\n            target[prop] = value;\n          }\n          return true;\n        },\n\n        defineProperty(proxyTarget, prop, desc) {\n          return Reflect.defineProperty(cache, prop, desc);\n        },\n\n        deleteProperty(proxyTarget, prop) {\n          return Reflect.deleteProperty(cache, prop);\n        },\n      };\n\n      // Per contract of the Proxy API, the \"get\" proxy handler must return the\n      // original value of the target if that value is declared read-only and\n      // non-configurable. For this reason, we create an object with the\n      // prototype set to `target` instead of using `target` directly.\n      // Otherwise we cannot return a custom object for APIs that\n      // are declared read-only and non-configurable, such as `chrome.devtools`.\n      //\n      // The proxy handlers themselves will still use the original `target`\n      // instead of the `proxyTarget`, so that the methods and properties are\n      // dereferenced via the original targets.\n      let proxyTarget = Object.create(target);\n      return new Proxy(proxyTarget, handlers);\n    };\n\n    /**\n     * Creates a set of wrapper functions for an event object, which handles\n     * wrapping of listener functions that those messages are passed.\n     *\n     * A single wrapper is created for each listener function, and stored in a\n     * map. Subsequent calls to `addListener`, `hasListener`, or `removeListener`\n     * retrieve the original wrapper, so that  attempts to remove a\n     * previously-added listener work as expected.\n     *\n     * @param {DefaultWeakMap<function, function>} wrapperMap\n     *        A DefaultWeakMap object which will create the appropriate wrapper\n     *        for a given listener function when one does not exist, and retrieve\n     *        an existing one when it does.\n     *\n     * @returns {object}\n     */\n    const wrapEvent = wrapperMap => ({\n      addListener(target, listener, ...args) {\n        target.addListener(wrapperMap.get(listener), ...args);\n      },\n\n      hasListener(target, listener) {\n        return target.hasListener(wrapperMap.get(listener));\n      },\n\n      removeListener(target, listener) {\n        target.removeListener(wrapperMap.get(listener));\n      },\n    });\n\n    const onRequestFinishedWrappers = new DefaultWeakMap(listener => {\n      if (typeof listener !== \"function\") {\n        return listener;\n      }\n\n      /**\n       * Wraps an onRequestFinished listener function so that it will return a\n       * `getContent()` property which returns a `Promise` rather than using a\n       * callback API.\n       *\n       * @param {object} req\n       *        The HAR entry object representing the network request.\n       */\n      return function onRequestFinished(req) {\n        const wrappedReq = wrapObject(req, {} /* wrappers */, {\n          getContent: {\n            minArgs: 0,\n            maxArgs: 0,\n          },\n        });\n        listener(wrappedReq);\n      };\n    });\n\n    const onMessageWrappers = new DefaultWeakMap(listener => {\n      if (typeof listener !== \"function\") {\n        return listener;\n      }\n\n      /**\n       * Wraps a message listener function so that it may send responses based on\n       * its return value, rather than by returning a sentinel value and calling a\n       * callback. If the listener function returns a Promise, the response is\n       * sent when the promise either resolves or rejects.\n       *\n       * @param {*} message\n       *        The message sent by the other end of the channel.\n       * @param {object} sender\n       *        Details about the sender of the message.\n       * @param {function(*)} sendResponse\n       *        A callback which, when called with an arbitrary argument, sends\n       *        that value as a response.\n       * @returns {boolean}\n       *        True if the wrapped listener returned a Promise, which will later\n       *        yield a response. False otherwise.\n       */\n      return function onMessage(message, sender, sendResponse) {\n        let didCallSendResponse = false;\n\n        let wrappedSendResponse;\n        let sendResponsePromise = new Promise(resolve => {\n          wrappedSendResponse = function(response) {\n            didCallSendResponse = true;\n            resolve(response);\n          };\n        });\n\n        let result;\n        try {\n          result = listener(message, sender, wrappedSendResponse);\n        } catch (err) {\n          result = Promise.reject(err);\n        }\n\n        const isResultThenable = result !== true && isThenable(result);\n\n        // If the listener didn't returned true or a Promise, or called\n        // wrappedSendResponse synchronously, we can exit earlier\n        // because there will be no response sent from this listener.\n        if (result !== true && !isResultThenable && !didCallSendResponse) {\n          return false;\n        }\n\n        // A small helper to send the message if the promise resolves\n        // and an error if the promise rejects (a wrapped sendMessage has\n        // to translate the message into a resolved promise or a rejected\n        // promise).\n        const sendPromisedResult = (promise) => {\n          promise.then(msg => {\n            // send the message value.\n            sendResponse(msg);\n          }, error => {\n            // Send a JSON representation of the error if the rejected value\n            // is an instance of error, or the object itself otherwise.\n            let message;\n            if (error && (error instanceof Error ||\n                typeof error.message === \"string\")) {\n              message = error.message;\n            } else {\n              message = \"An unexpected error occurred\";\n            }\n\n            sendResponse({\n              __mozWebExtensionPolyfillReject__: true,\n              message,\n            });\n          }).catch(err => {\n            // Print an error on the console if unable to send the response.\n            console.error(\"Failed to send onMessage rejected reply\", err);\n          });\n        };\n\n        // If the listener returned a Promise, send the resolved value as a\n        // result, otherwise wait the promise related to the wrappedSendResponse\n        // callback to resolve and send it as a response.\n        if (isResultThenable) {\n          sendPromisedResult(result);\n        } else {\n          sendPromisedResult(sendResponsePromise);\n        }\n\n        // Let Chrome know that the listener is replying.\n        return true;\n      };\n    });\n\n    const wrappedSendMessageCallback = ({reject, resolve}, reply) => {\n      if (extensionAPIs.runtime.lastError) {\n        // Detect when none of the listeners replied to the sendMessage call and resolve\n        // the promise to undefined as in Firefox.\n        // See https://github.com/mozilla/webextension-polyfill/issues/130\n        if (extensionAPIs.runtime.lastError.message === CHROME_SEND_MESSAGE_CALLBACK_NO_RESPONSE_MESSAGE) {\n          resolve();\n        } else {\n          reject(new Error(extensionAPIs.runtime.lastError.message));\n        }\n      } else if (reply && reply.__mozWebExtensionPolyfillReject__) {\n        // Convert back the JSON representation of the error into\n        // an Error instance.\n        reject(new Error(reply.message));\n      } else {\n        resolve(reply);\n      }\n    };\n\n    const wrappedSendMessage = (name, metadata, apiNamespaceObj, ...args) => {\n      if (args.length < metadata.minArgs) {\n        throw new Error(`Expected at least ${metadata.minArgs} ${pluralizeArguments(metadata.minArgs)} for ${name}(), got ${args.length}`);\n      }\n\n      if (args.length > metadata.maxArgs) {\n        throw new Error(`Expected at most ${metadata.maxArgs} ${pluralizeArguments(metadata.maxArgs)} for ${name}(), got ${args.length}`);\n      }\n\n      return new Promise((resolve, reject) => {\n        const wrappedCb = wrappedSendMessageCallback.bind(null, {resolve, reject});\n        args.push(wrappedCb);\n        apiNamespaceObj.sendMessage(...args);\n      });\n    };\n\n    const staticWrappers = {\n      devtools: {\n        network: {\n          onRequestFinished: wrapEvent(onRequestFinishedWrappers),\n        },\n      },\n      runtime: {\n        onMessage: wrapEvent(onMessageWrappers),\n        onMessageExternal: wrapEvent(onMessageWrappers),\n        sendMessage: wrappedSendMessage.bind(null, \"sendMessage\", {minArgs: 1, maxArgs: 3}),\n      },\n      tabs: {\n        sendMessage: wrappedSendMessage.bind(null, \"sendMessage\", {minArgs: 2, maxArgs: 3}),\n      },\n    };\n    const settingMetadata = {\n      clear: {minArgs: 1, maxArgs: 1},\n      get: {minArgs: 1, maxArgs: 1},\n      set: {minArgs: 1, maxArgs: 1},\n    };\n    apiMetadata.privacy = {\n      network: {\"*\": settingMetadata},\n      services: {\"*\": settingMetadata},\n      websites: {\"*\": settingMetadata},\n    };\n\n    return wrapObject(extensionAPIs, staticWrappers, apiMetadata);\n  };\n\n  // The build process adds a UMD wrapper around this file, which makes the\n  // `module` variable available.\n  module.exports = wrapAPIs(chrome);\n} else {\n  module.exports = globalThis.browser;\n}\n", "export { StatefulTabFrameTracker } from \"./stateful-tab-frame-tracker\";\n", "import browser from \"webextension-polyfill\";\nimport { PersistentTabFrameTracker } from \"./persistent-tab-frame-tracker\";\nimport { CoreFrameInfo, TabFrameTracker } from \"./tab-frame-tracker\";\nimport {\n  diagnosticScript,\n  frameMonitorContentScript,\n} from \"./content-scripts/frame-monitor\";\n\n// Generic state management types\ntype TabState<T> = {\n  tabData: T;\n  frameStates: Map<number, any>;\n};\n\n// Enhanced query types\ntype TabWithFrameStates<T, F> = {\n  tabState: T;\n  frames: Map<\n    number,\n    {\n      frameInfo: CoreFrameInfo;\n      state?: F;\n    }\n  >;\n};\n\ntype FramePollingOptions = {\n  enabled: boolean;\n  interval?: number; // milliseconds\n  includeChildFrames?: boolean;\n};\n\nclass StatefulTabFrameTracker<\n  TabStateType extends object = any,\n  FrameStateType extends object = any\n> extends TabFrameTracker {\n  private tabStates: Map<number, TabState<TabStateType>> = new Map();\n  private frameSignatureMap: Map<number, Map<string, number>> = new Map();\n  private useInjection: boolean = false;\n  private pollingInterval?: number;\n  private framePollingOptions: FramePollingOptions;\n  private hasScriptingPermission: boolean = false;\n  private defaultTabState?: TabStateType;\n  private defaultFrameState?: FrameStateType;\n\n  constructor(\n    options: {\n      persistenceInterval?: number;\n      useInjection?: boolean;\n      framePolling?: FramePollingOptions;\n      defaultTabState?: TabStateType;\n      defaultFrameState?: FrameStateType;\n    } = {}\n  ) {\n    super();\n\n    this.useInjection = options.useInjection ?? false;\n\n    this.framePollingOptions = {\n      enabled: false,\n      interval: 5000,\n      includeChildFrames: true,\n      ...options.framePolling,\n    };\n\n    this.defaultTabState = options.defaultTabState;\n    this.defaultFrameState = options.defaultFrameState;\n\n    this.initialize();\n  }\n\n  private async initialize() {\n    // Check if we have scripting permission\n    const permissions = await browser.permissions.getAll();\n    this.hasScriptingPermission =\n      permissions.permissions?.includes(\"scripting\") || false;\n\n    console.log(\n      \"Initializing StatefulTabFrameTracker\",\n      {\n        hasScriptingPermission: this.hasScriptingPermission,\n        useInjection: this.useInjection,\n      },\n      this.framePollingOptions\n    );\n    if (this.hasScriptingPermission && this.useInjection) {\n      await this.initializeContentScriptSupport();\n    } else if (this.framePollingOptions.enabled) {\n      await this.initializeFramePolling();\n    }\n\n    if (this.defaultTabState) {\n      const existingTabs = await browser.tabs.query({});\n      for (const tab of existingTabs) {\n        if (tab.id && !this.tabStates.has(tab.id)) {\n          this.tabStates.set(tab.id, {\n            tabData: { ...this.defaultTabState },\n            frameStates: new Map(),\n          });\n        }\n      }\n    }\n  }\n\n  private async initializeFramePolling() {\n    if (!this.framePollingOptions.enabled) return;\n\n    const pollFrames = async () => {\n      const tabs = await browser.tabs.query({});\n\n      for (const tab of tabs) {\n        if (!tab.id) continue;\n\n        try {\n          const frames = await browser.webNavigation.getAllFrames({\n            tabId: tab.id,\n          });\n          if (!frames) continue;\n\n          const tabInfo = this.frameMap.get(tab.id);\n          if (!tabInfo) continue;\n\n          const currentFrameIds = new Set<number>();\n\n          for (const frame of frames) {\n            currentFrameIds.add(frame.frameId);\n\n            const existingFrame = tabInfo.frames.get(frame.frameId);\n            const frameUrl = frame.url;\n\n            if (!existingFrame) {\n              tabInfo.frames.set(frame.frameId, {\n                visible: true,\n                url: frameUrl,\n                parentFrameId:\n                  frame.parentFrameId >= 0 ? frame.parentFrameId : undefined,\n              });\n\n              if (this.defaultFrameState) {\n                const tabState = this.tabStates.get(tab.id);\n                if (tabState && !tabState.frameStates.has(frame.frameId)) {\n                  tabState.frameStates.set(frame.frameId, {\n                    ...this.defaultFrameState,\n                  });\n                }\n              }\n\n              this.notifyListeners({\n                type: \"added\",\n                tabId: tab.id,\n                frameId: frame.frameId,\n                currentState: {\n                  visible: true,\n                  url: frameUrl,\n                },\n              });\n            } else if (existingFrame.url !== frameUrl) {\n              // Frame URL changed\n\n              const previousUrl = existingFrame.url;\n              existingFrame.url = frameUrl;\n\n              this.notifyListeners({\n                type: \"modified\",\n                tabId: tab.id,\n                frameId: frame.frameId,\n                previousState: { url: previousUrl },\n                currentState: { url: frameUrl },\n              });\n            }\n          }\n\n          for (const [frameId, frameInfo] of tabInfo.frames) {\n            if (!currentFrameIds.has(frameId) && frameId !== 0) {\n              // Dont remove main frame\n              tabInfo.frames.delete(frameId);\n\n              const tabState = this.tabStates.get(tab.id);\n              if (tabState) {\n                tabState.frameStates.delete(frameId);\n              }\n\n              this.notifyListeners({\n                type: \"removed\",\n                tabId: tab.id,\n                frameId,\n                previousState: {\n                  url: frameInfo.url,\n                  visible: frameInfo.visible,\n                },\n              });\n            }\n          }\n        } catch (error) {\n          console.error(`Error polling frames for tab ${tab.id}:`, error);\n        }\n      }\n    };\n\n    await pollFrames();\n\n    this.pollingInterval = window.setInterval(\n      pollFrames,\n      this.framePollingOptions.interval\n    );\n  }\n\n  private async initializeContentScriptSupport() {\n    console.log(\"[ARGOS:BG] initializeContentScriptSupport()\");\n    // Listen for frame visibility changes from content scripts\n    browser.runtime.onMessage.addListener(\n      (message: any, sender: browser.Runtime.MessageSender) => {\n        if (message.type === \"frameVisibilityChange\") {\n          console.log(\n            \"[SHR:BG] StatefulTabFrameTracker, frameVisibilityChange: \",\n            message\n          );\n          const tabId = sender.tab?.id;\n          if (!tabId) return;\n\n          const frameSignature = message.frameId;\n\n          const tabInfo = this.frameMap.get(tabId!);\n          if (!tabInfo) return;\n\n          const frameEntry = Array.from(tabInfo.frames.entries()).find(\n            ([_, frameInfo]) => frameInfo.url === frameSignature\n          );\n\n          if (frameEntry) {\n            const [frameId, frameInfo] = frameEntry;\n\n            frameInfo.visible = message.visible;\n\n            // this.setFrameVisibility(tabId!, frameId, message.visible);\n            this.handleFrameVisibilityChange({ ...message, frameId });\n          }\n        }\n        return true;\n      }\n    );\n\n    this.subscribe(async (event) => {\n      if (event.type === \"modified\" && event.frameId === 0) {\n        // this.handleFrameVisibilityChange(event);\n        await new Promise((resolve) => setTimeout(resolve, 1000));\n        try {\n          const tab = await browser.tabs.get(event.tabId);\n          await this.injectContentScript(tab);\n        } catch (err) {\n          console.warn(\n            `[ARGOS:BG] Failed to inject frame monitor into refreshed tab ${event.tabId}:`,\n            err\n          );\n        }\n      }\n    });\n\n    // Inject content script into existing tabs\n    const existingTabs = await browser.tabs.query({});\n    for (const tab of existingTabs) {\n      if (tab.id) {\n        await this.injectContentScript(tab);\n      }\n    }\n  }\n\n  private async injectContentScript(tab: browser.Tabs.Tab) {\n    if (!this.useInjection || !tab.id) return;\n\n    try {\n      const frameMonitorResult = await browser.scripting.executeScript({\n        target: { tabId: tab.id! },\n        func: frameMonitorContentScript,\n      });\n\n      const frameResult = frameMonitorResult[0]?.result;\n\n      if (frameResult?.success && frameResult.frames) {\n        console.log(\n          `[ARGOS:BG] Got initial frame visibility for tab ${tab.id}`,\n          frameResult.frames\n        );\n        const tabInfo = this.frameMap.get(tab.id!);\n        console.log(`[ARGOS:BG] Got tabInfo for comparison `, tabInfo);\n        if (!tabInfo) return;\n\n        frameResult.frames.forEach((frame: any) => {\n          const frameEntry = Array.from(tabInfo.frames.entries()).find(\n            ([_, frameInfo]) => frameInfo.url === frame.frameId\n          );\n\n          console.log(`[ARGOS:BG] Found frameEntry for comparison`, frameEntry);\n\n          if (frameEntry) {\n            console.log(`[ARGOS:BG] Found matching frame entry`, frameEntry);\n            const [frameId, frameInfo] = frameEntry;\n            frameInfo.visible = frame.visible;\n\n            this.handleFrameVisibilityChange({\n              frameId,\n              tabId: tab.id!,\n              visible: frame.visible,\n            });\n          }\n        });\n      }\n    } catch (error) {\n      console.warn(\n        `[ARGOS:BG] Failed to inject content script into tab ${tab.id}: ${tab.url}:`,\n        error\n      );\n      // If content script injection fails, fall back to polling for this tab\n      if (this.framePollingOptions.enabled) {\n        console.log(\n          `[ARGOS:BG] Script execution not enabled, falling back to polling for tab ${tab.id}`\n        );\n        this.pollFramesForTab(tab.id!);\n      }\n    }\n  }\n\n  private async pollFramesForTab(tabId: number) {\n    try {\n      const frames = await browser.webNavigation.getAllFrames({ tabId });\n      if (!frames) return;\n\n      const tabInfo = this.frameMap.get(tabId);\n      if (!tabInfo) return;\n\n      // Update frame information...\n      // (Similar logic to initializeFramePolling but for a single tab)\n    } catch (error) {\n      console.warn(`Failed to poll frames for tab ${tabId}:`, error);\n    }\n  }\n\n  private handleFrameVisibilityChange(message: any) {\n    const { frameId, tabId, visible } = message;\n    const frameInfo = this.getFrameInfo(tabId, frameId);\n\n    if (frameInfo) {\n      frameInfo.visible = visible;\n      this.notifyListeners({\n        type: \"visibility_changed\",\n        tabId,\n        frameId,\n        previousState: { visible: !visible },\n        currentState: { visible },\n      });\n    }\n  }\n\n  public setFrameVisibility(tabId: number, frameId: number, visible: boolean) {\n    const frameInfo = this.getFrameInfo(tabId, frameId);\n\n    if (frameInfo) {\n      frameInfo.visible = visible;\n      this.notifyListeners({\n        type: \"modified\",\n        tabId,\n        frameId,\n        previousState: { visible: !visible },\n        currentState: { visible },\n      });\n    }\n  }\n\n  // State management methods\n  public setTabState(\n    tabId: number,\n    state: TabStateType | Partial<TabStateType>\n  ): void {\n    const existing = this.tabStates.get(tabId);\n\n    if (!existing) {\n      if (this.isFullState<TabStateType>(state)) {\n        this.tabStates.set(tabId, {\n          tabData: state,\n          frameStates: new Map(),\n        });\n      } else if (this.defaultTabState) {\n        this.tabStates.set(tabId, {\n          tabData: { ...this.defaultTabState, ...state },\n          frameStates: new Map(),\n        });\n      } else {\n        throw new Error(\"Initial state must be a full state\");\n      }\n    } else {\n      this.tabStates.set(tabId, {\n        tabData: { ...existing.tabData, ...state },\n        frameStates: existing.frameStates,\n      });\n    }\n  }\n\n  public setFrameState(\n    tabId: number,\n    frameId: number,\n    state: FrameStateType | Partial<FrameStateType>\n  ): void {\n    let tabState = this.tabStates.get(tabId);\n\n    if (!tabState && this.defaultFrameState) {\n      tabState = {\n        tabData: { ...this.defaultTabState } as TabStateType,\n        frameStates: new Map(),\n      };\n      this.tabStates.set(tabId, tabState);\n    }\n\n    if (!tabState) return;\n\n    const existingFrameState = tabState.frameStates.get(frameId);\n\n    if (!existingFrameState) {\n      if (this.isFullState<FrameStateType>(state)) {\n        tabState.frameStates.set(frameId, state);\n      } else if (this.defaultFrameState) {\n        tabState.frameStates.set(frameId, {\n          ...this.defaultFrameState,\n          ...state,\n        });\n      } else {\n        throw new Error(\"Initial frame state must be a full state\");\n      }\n    } else {\n      tabState.frameStates.set(frameId, {\n        ...existingFrameState,\n        ...state,\n      });\n    }\n  }\n\n  private isFullState<T extends object>(state: T | Partial<T>): state is T {\n    const requiredKeys = Object.keys(this.getTypeTemplate<T>());\n    const stateKeys = Object.keys(state);\n\n    return requiredKeys.every((key) => stateKeys.includes(key));\n  }\n\n  private getTypeTemplate<T>(): Required<T> {\n    return {} as Required<T>;\n  }\n\n  public getTabState(tabId: number): TabStateType | undefined {\n    return this.tabStates.get(tabId)?.tabData ?? this.defaultTabState;\n  }\n\n  public getFrameState(\n    tabId: number,\n    frameId: number\n  ): FrameStateType | undefined {\n    const tabState = this.tabStates.get(tabId);\n    return tabState?.frameStates.get(frameId) ?? this.defaultFrameState;\n  }\n\n  // Query methods for tab states\n  public getAllTabsWithState(): Map<\n    number,\n    TabWithFrameStates<TabStateType, FrameStateType>\n  > {\n    const result = new Map<\n      number,\n      TabWithFrameStates<TabStateType, FrameStateType>\n    >();\n\n    for (const [tabId, tabState] of this.tabStates) {\n      const tabInfo = this.frameMap.get(tabId);\n      if (!tabInfo) continue;\n\n      result.set(tabId, {\n        tabState: tabState.tabData,\n        frames: new Map(\n          Array.from(tabInfo.frames.entries()).map(([frameId, frameInfo]) => [\n            frameId,\n            {\n              frameInfo,\n              state: tabState.frameStates.get(frameId),\n            },\n          ])\n        ),\n      });\n    }\n\n    return result;\n  }\n\n  public queryTabs(\n    predicate: (state: TabStateType) => boolean\n  ): Map<number, TabWithFrameStates<TabStateType, FrameStateType>> {\n    const result = new Map<\n      number,\n      TabWithFrameStates<TabStateType, FrameStateType>\n    >();\n\n    for (const [tabId, tabState] of this.tabStates) {\n      if (predicate(tabState.tabData)) {\n        const tabInfo = this.frameMap.get(tabId);\n        if (!tabInfo) continue;\n\n        result.set(tabId, {\n          tabState: tabState.tabData,\n          frames: new Map(\n            Array.from(tabInfo.frames.entries()).map(([frameId, frameInfo]) => [\n              frameId,\n              { frameInfo, state: tabState.frameStates.get(frameId) },\n            ])\n          ),\n        });\n      }\n    }\n\n    return result;\n  }\n\n  // Override cleanup to handle state\n  public dispose(): void {\n    if (this.pollingInterval) {\n      clearInterval(this.pollingInterval);\n    }\n    this.tabStates.clear();\n  }\n}\n\nexport { StatefulTabFrameTracker };\n", "import browser from \"webextension-polyfill\";\n\nexport type CoreFrameInfo = {\n  visible: boolean;\n  url: string; // Maybe add this if we can get it from events\n  parentFrameId?: number; // Maybe add this for hierarchy tracking\n};\n\ntype CoreTabInfo = {\n  url: string;\n  frames: Map<number, CoreFrameInfo>;\n};\n\ntype FrameMap = Map<number, CoreTabInfo>;\n\ntype ChangeType = \"added\" | \"removed\" | \"modified\" | \"visibility_changed\";\n\ntype ChangeEvent = {\n  type: ChangeType;\n  tabId: number;\n  frameId?: number;\n  previousState?: {\n    url?: string;\n    visible?: boolean;\n  };\n  currentState?: {\n    url?: string;\n    visible?: boolean;\n  };\n};\n\ntype ChangeListener = (event: ChangeEvent) => void;\n\nexport class TabFrameTracker {\n  public frameMap: FrameMap = new Map();\n  private listeners: Set<ChangeListener> = new Set();\n\n  constructor() {\n    this.initializeListeners();\n  }\n\n  public notifyListeners(event: ChangeEvent) {\n    this.listeners.forEach((listener) => listener(event));\n  }\n\n  public subscribe(listener: ChangeListener): () => void {\n    this.listeners.add(listener);\n    return () => this.listeners.delete(listener); // Returns unsubscribe function\n  }\n\n  private async initializeListeners() {\n    // Listen for tab creation\n    browser.tabs.onCreated.addListener((tab: browser.Tabs.Tab) => {\n      if (tab.id) {\n        this.frameMap.set(tab.id, {\n          url: tab.url || \"\",\n          frames: new Map([[0, { visible: true, url: tab.url || \"\" }]]),\n        });\n\n        this.notifyListeners({\n          type: \"added\",\n          tabId: tab.id,\n          frameId: 0,\n          currentState: {\n            url: tab.url || \"\",\n            visible: true,\n          },\n        });\n      }\n    });\n\n    // Listen for tab updates (URL changes)\n    browser.tabs.onUpdated.addListener(\n      (\n        tabId: number,\n        changeInfo: browser.Tabs.OnUpdatedChangeInfoType,\n        tab: browser.Tabs.Tab\n      ) => {\n        const tabInfo = this.frameMap.get(tabId);\n\n        if (!tabInfo) return;\n\n        if (changeInfo.url || changeInfo.status === \"loading\") {\n          const previousUrl = tabInfo.url;\n          const newUrl = changeInfo.url || tab.url || previousUrl;\n          tabInfo.url = newUrl;\n\n          // Clear all frames except the main frame (0) on navigation\n          const mainFrame = tabInfo.frames.get(0);\n          tabInfo.frames.clear();\n          if (mainFrame) {\n            tabInfo.frames.set(0, { ...mainFrame, url: newUrl });\n          }\n\n          this.notifyListeners({\n            type: \"modified\",\n            tabId,\n            frameId: 0,\n            previousState: { url: previousUrl },\n            currentState: { url: newUrl, visible: true },\n          });\n        }\n      }\n    );\n\n    // Listen for tab removal\n    browser.tabs.onRemoved.addListener((tabId: number) => {\n      const tabInfo = this.frameMap.get(tabId);\n      if (tabInfo) {\n        this.frameMap.delete(tabId);\n\n        this.notifyListeners({\n          type: \"removed\",\n          tabId,\n          previousState: {\n            url: tabInfo.url,\n          },\n        });\n      }\n    });\n\n    // Listen for frame creation\n    browser.webNavigation.onCreatedNavigationTarget.addListener(\n      (details: browser.WebNavigation.OnCreatedNavigationTargetDetailsType) => {\n        const tabInfo = this.frameMap.get(details.tabId);\n        if (tabInfo && details.sourceFrameId) {\n          tabInfo.frames.set(details.sourceFrameId, {\n            visible: true,\n            url: details.url,\n          });\n\n          this.notifyListeners({\n            type: \"added\",\n            tabId: details.tabId,\n            frameId: details.sourceFrameId,\n            currentState: {\n              visible: true,\n            },\n          });\n        }\n      }\n    );\n\n    // Listen for frame navigation\n    browser.webNavigation.onCommitted.addListener(\n      (details: browser.WebNavigation.OnCommittedDetailsType) => {\n        const tabInfo = this.frameMap.get(details.tabId);\n        if (tabInfo && details.frameId) {\n          const frameExists = tabInfo.frames.has(details.frameId);\n          tabInfo.frames.set(details.frameId, {\n            visible: true,\n            url: details.url,\n          });\n\n          this.notifyListeners({\n            type: frameExists ? \"modified\" : \"added\",\n            tabId: details.tabId,\n            frameId: details.frameId,\n            currentState: {\n              visible: true,\n            },\n          });\n        }\n      }\n    );\n\n    // Listen for frame removal\n    browser.webNavigation.onBeforeNavigate.addListener(\n      (details: browser.WebNavigation.OnBeforeNavigateDetailsType) => {\n        const tabInfo = this.frameMap.get(details.tabId);\n        if (tabInfo && details.frameId) {\n          if (details.frameId !== 0) {\n            const frameInfo = tabInfo.frames.get(details.frameId);\n            tabInfo.frames.delete(details.frameId);\n\n            if (frameInfo) {\n              this.notifyListeners({\n                type: \"removed\",\n                tabId: details.tabId,\n                frameId: details.frameId,\n                previousState: {\n                  visible: frameInfo.visible,\n                },\n              });\n            }\n          }\n        }\n      }\n    );\n\n    // Initialize existing tabs\n    const existingTabs = await browser.tabs.query({});\n    for (const tab of existingTabs) {\n      if (tab.id) {\n        this.frameMap.set(tab.id, {\n          url: tab.url || \"\",\n          frames: new Map([[0, { visible: true, url: tab.url || \"\" }]]),\n        });\n\n        this.notifyListeners({\n          type: \"added\",\n          tabId: tab.id,\n          frameId: 0,\n          currentState: {\n            url: tab.url || \"\",\n            visible: true,\n          },\n        });\n      }\n    }\n\n    // Handle window removal\n    browser.windows.onRemoved.addListener(async (windowId: any) => {\n      const tabs = await browser.tabs.query({ windowId });\n      for (const tab of tabs) {\n        if (tab.id) {\n          const tabInfo = this.frameMap.get(tab.id);\n          this.frameMap.delete(tab.id);\n\n          if (tabInfo) {\n            this.notifyListeners({\n              type: \"removed\",\n              tabId: tab.id,\n              previousState: {\n                url: tabInfo.url,\n              },\n            });\n          }\n        }\n      }\n    });\n  }\n\n  // Helper methods\n  public getTabInfo(tabId: number): CoreTabInfo | undefined {\n    return this.frameMap.get(tabId);\n  }\n\n  public getFrameInfo(\n    tabId: number,\n    frameId: number\n  ): CoreFrameInfo | undefined {\n    return this.frameMap.get(tabId)?.frames.get(frameId);\n  }\n\n  public getAllTabs(): FrameMap {\n    return this.frameMap;\n  }\n}\n", "//import browser from \"webextension-polyfill\";\n\n// import browser from \"webextension-polyfill\";\n// declare const browser: typeof import(\"webextension-polyfill\");\n// frame-monitor.ts - Content script for frame monitoring\n\nconsole.log(\"[ARGOS:CS] frame monitor mounted\");\nexport const frameMonitorContentScript = function () {\n  console.log(\"[ARGOS:CS] frame monitor running\");\n  const VISIBILITY_CHECK_INTERVAL = 10000; // 1 second\n\n  function isStyleHidden(element: HTMLElement): boolean {\n    const style = window.getComputedStyle(element);\n    return (\n      style.display === \"none\" ||\n      style.visibility === \"hidden\" ||\n      style.opacity === \"0\" ||\n      style.width === \"0px\" ||\n      style.height === \"0px\"\n    );\n  }\n\n  function isOffscreen(rect: DOMRect): boolean {\n    // Check if element is completely off-screen\n    return (\n      rect.right <= 0 ||\n      rect.bottom <= 0 ||\n      rect.left >= window.innerWidth ||\n      rect.top >= window.innerHeight\n    );\n  }\n\n  function hasZeroDimension(element: HTMLElement): boolean {\n    return element.offsetWidth <= 0 || element.offsetHeight <= 0;\n  }\n\n  function isParentHidden(element: HTMLElement): boolean {\n    let parent = element.parentElement;\n    while (parent) {\n      if (isStyleHidden(parent)) {\n        return true;\n      }\n      parent = parent.parentElement;\n    }\n    return false;\n  }\n\n  function hasVisibleArea(element: HTMLElement): boolean {\n    const rects = element.getClientRects();\n    if (!rects || rects.length === 0) {\n      return false;\n    }\n\n    // Check if any rect has a meaningful area\n    for (let i = 0; i < rects.length; i++) {\n      const rect = rects[i];\n      if (rect.width > 0 && rect.height > 0 && !isOffscreen(rect)) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  function checkFrameVisibility(frame: HTMLIFrameElement): boolean {\n    try {\n      // 1. Basic style checks\n      if (isStyleHidden(frame)) {\n        return false;\n      }\n\n      // 2. Check parent elements\n      if (isParentHidden(frame)) {\n        return false;\n      }\n\n      // 3. Check dimensions\n      if (hasZeroDimension(frame)) {\n        return false;\n      }\n\n      // 4. Check if frame has any visible rectangles\n      if (!hasVisibleArea(frame)) {\n        return false;\n      }\n\n      // 5. Try to check frame content if same-origin\n      try {\n        const frameDoc = frame.contentDocument;\n        if (frameDoc && frameDoc.body) {\n          if (hasZeroDimension(frameDoc.body)) {\n            return false;\n          }\n        }\n      } catch (e) {\n        // Cross-origin access will fail - that's okay\n        // We'll rely on the other checks in this case\n      }\n\n      // Additional checks for specific scenarios\n      const rect = frame.getBoundingClientRect();\n\n      // Check if frame is too small to be meaningful\n      if (rect.width < 2 && rect.height < 2) {\n        return false;\n      }\n\n      // Check if frame is covered by other elements\n      const centerX = rect.left + rect.width / 2;\n      const centerY = rect.top + rect.height / 2;\n      const elementAtPoint = document.elementFromPoint(centerX, centerY);\n      if (\n        elementAtPoint &&\n        !frame.contains(elementAtPoint) &&\n        !elementAtPoint.contains(frame)\n      ) {\n        // Something else is covering the center of the frame\n        // But only consider it hidden if a significant portion is covered\n        const coverageThreshold = 0.9; // 90% coverage to consider hidden\n        const elementsAtCorners = [\n          document.elementFromPoint(rect.left + 2, rect.top + 2),\n          document.elementFromPoint(rect.right - 2, rect.top + 2),\n          document.elementFromPoint(rect.left + 2, rect.bottom - 2),\n          document.elementFromPoint(rect.right - 2, rect.bottom - 2),\n        ];\n\n        const coveredCorners = elementsAtCorners.filter(\n          (el) => el && !frame.contains(el) && !el.contains(frame)\n        ).length;\n\n        if (coveredCorners >= 3) {\n          // If 3 or more corners are covered\n          return false;\n        }\n      }\n\n      console.log(\"[ARGOS:CS] checkFrameVisibility: true\");\n      return true;\n    } catch (error) {\n      console.warn(\"Error checking frame visibility:\", error);\n      // In case of error, default to considering it visible\n      return true;\n    }\n  }\n\n  function setupFrameMonitoring() {\n    // Track all iframes\n    const frames = new Map<HTMLIFrameElement, boolean>();\n\n    console.log(\"[ARGOS:CS] setupFrameMonitoring\");\n    // Initial frame discovery\n    document.querySelectorAll(\"iframe\").forEach((frame) => {\n      console.log(\"[ARGOS:CS] setupFrameMonitoring: initial frame discovery\");\n      frames.set(\n        frame as HTMLIFrameElement,\n        checkFrameVisibility(frame as HTMLIFrameElement)\n      );\n    });\n\n    // Set up mutation observer for frame changes\n    const observer = new MutationObserver((mutations) => {\n      mutations.forEach((mutation) => {\n        mutation.addedNodes.forEach((node) => {\n          if (node instanceof HTMLIFrameElement) {\n            console.log(\n              \"[ARGOS:CS] mutation : added node, checking frame visibility\"\n            );\n            frames.set(node, checkFrameVisibility(node));\n          }\n        });\n\n        mutation.removedNodes.forEach((node) => {\n          if (node instanceof HTMLIFrameElement) {\n            console.log(\"[ARGOS:CS] mutation : removed node\");\n            frames.delete(node);\n          }\n        });\n      });\n    });\n\n    observer.observe(document.body, {\n      childList: true,\n      subtree: true,\n    });\n\n    // Monitor visibility changes\n    const intersectionObserver = new IntersectionObserver(\n      (entries) => {\n        entries.forEach((entry) => {\n          if (entry.target instanceof HTMLIFrameElement) {\n            const frame = entry.target;\n            console.log(\n              \"[ARGOS:CS] intersection observer : checking frame visibility\"\n            );\n            const isVisible = checkFrameVisibility(frame);\n\n            if (frames.get(frame) !== isVisible) {\n              frames.set(frame, isVisible);\n              chrome.runtime.sendMessage({\n                type: \"frameVisibilityChange\",\n                frameId: frame.src,\n                visible: isVisible,\n              });\n            }\n          }\n        });\n      },\n      {\n        threshold: [0, 0.1, 0.5, 1.0], // Check at different visibility thresholds\n      }\n    );\n\n    // Periodic visibility checking for other cases\n    setInterval(() => {\n      frames.forEach((oldVisible, frame) => {\n        const newVisible = checkFrameVisibility(frame);\n        console.log(`[ARGOS:CS:${frame.id}] periodic visibility checking`, {\n          src: frame.src,\n          visible: newVisible,\n        });\n        if (oldVisible !== newVisible) {\n          console.log(`[ARGOS:CS:${frame.id}] found visibility change!`);\n          frames.set(frame, newVisible);\n          chrome.runtime.sendMessage({\n            type: \"frameVisibilityChange\",\n            frameId: frame.src,\n            visible: newVisible,\n          });\n        }\n      });\n    }, VISIBILITY_CHECK_INTERVAL);\n\n    return {\n      success: true,\n      frames: Array.from(frames, ([key, value]) => ({\n        frameId: key.src,\n        visible: value,\n      })),\n    };\n  }\n\n  return setupFrameMonitoring();\n};\n\nexport const diagnosticScript = function () {\n  console.log(\"[ARGOS:CS] Diagnostic running\");\n  console.log(\"[ARGOS:CS] Window location:\", window.location.href);\n  console.log(\"[ARGOS:CS] Document readyState:\", document.readyState);\n\n  // Test if browser API is available\n  if (typeof chrome !== \"undefined\") {\n    console.log(\"[ARGOS:CS] browser API is available\");\n    chrome.runtime\n      .sendMessage({\n        type: \"diagnostic\",\n        message: \"Diagnostic script successfully ran\",\n      })\n      .catch((e) => console.log(\"[ARGOS:CS] Failed to send message:\", e));\n  } else {\n    console.log(\"[ARGOS:CS] browser API is NOT available!\");\n  }\n\n  return {\n    success: true,\n    iframes: document.getElementsByTagName(\"iframe\").length,\n  };\n};\n", "import browser from \"webextension-polyfill\";\nimport { StatefulTabFrameTracker } from \"argos\";\n\ninterface TabState {\n  activatedDate: number | null;\n  isActive: boolean;\n}\n\ninterface FrameState {\n  scanning: boolean;\n}\n\nconst tracker = new StatefulTabFrameTracker<TabState, FrameState>({\n  useInjection: true,\n  defaultTabState: {\n    activatedDate: 0,\n    isActive: false,\n  },\n  defaultFrameState: {\n    scanning: false,\n  },\n});\n\nbrowser.runtime.onMessage.addListener((message, sender, sendResponse: any) => {\n  if (message.type === \"GET_TABS\") {\n    console.log(`[ARGOS TEST:BG] Message received:`, message);\n    console.log(`[ARGOS TEST:BG] tracker.getAllTabs():`, tracker.getAllTabs());\n    const tabArray: any[] = [];\n    tracker.getAllTabs().forEach((value, key) => {\n      const frameArray = Array.from(value.frames.entries()).map(\n        ([frameId, frameInfo]) => {\n          return {\n            frameId,\n            frameInfo,\n          };\n        }\n      );\n      if (value.url.includes(\"google.com\")) {\n        tabArray.push({\n          tabId: key,\n          tabInfo: value,\n          frames: frameArray,\n        });\n      }\n    });\n\n    console.log(`[ARGOS TEST:BG] tracker.getAllTabs():`, tabArray);\n    sendResponse({\n      type: \"TAB_RESPONSE\",\n      payload: { tabs: tabArray },\n    });\n  }\n});\n"],
  "mappings": "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",
  "names": ["globalThis", "chrome", "runtime", "id", "Error", "browser", "Object", "getPrototypeOf", "prototype", "CHROME_SEND_MESSAGE_CALLBACK_NO_RESPONSE_MESSAGE", "wrapAPIs", "extensionAPIs", "apiMetadata", "keys", "length", "DefaultWeakMap", "WeakMap", "constructor", "createItem", "items", "undefined", "get", "key", "has", "set", "isThenable", "value", "then", "makeCallback", "promise", "metadata", "callbackArgs", "lastError", "reject", "message", "singleCallbackArg", "resolve", "pluralizeArguments", "numArgs", "wrapAsyncFunction", "name", "asyncFunctionWrapper", "target", "args", "minArgs", "maxArgs", "Promise", "fallbackToNoCallback", "cbError", "console", "warn", "noCallback", "wrapMethod", "method", "wrapper", "Proxy", "apply", "targetMethod", "thisObj", "call", "hasOwnProperty", "Function", "bind", "wrapObject", "wrappers", "cache", "create", "handlers", "proxyTarget", "prop", "receiver", "defineProperty", "configurable", "enumerable", "desc", "Reflect", "deleteProperty", "wrapEvent", "wrapperMap", "addListener", "listener", "hasListener", "removeListener", "onRequestFinishedWrappers", "onRequestFinished", "req", "wrappedReq", "getContent", "onMessageWrappers", "onMessage", "sender", "sendResponse", "didCallSendResponse", "wrappedSendResponse", "sendResponsePromise", "response", "result", "err", "isResultThenable", "sendPromisedResult", "msg", "error", "__mozWebExtensionPolyfillReject__", "catch", "wrappedSendMessageCallback", "reply", "wrappedSendMessage", "apiNamespaceObj", "wrappedCb", "push", "sendMessage", "staticWrappers", "devtools", "network", "onMessageExternal", "tabs", "settingMetadata", "clear", "privacy", "services", "websites", "module", "exports", "globalThis", "chrome", "runtime", "id", "Error", "browser", "Object", "getPrototypeOf", "prototype", "CHROME_SEND_MESSAGE_CALLBACK_NO_RESPONSE_MESSAGE", "wrapAPIs", "extensionAPIs", "apiMetadata", "keys", "length", "DefaultWeakMap", "WeakMap", "constructor", "createItem", "items", "undefined", "get", "key", "has", "set", "isThenable", "value", "then", "makeCallback", "promise", "metadata", "callbackArgs", "lastError", "reject", "message", "singleCallbackArg", "resolve", "pluralizeArguments", "numArgs", "wrapAsyncFunction", "name", "asyncFunctionWrapper", "target", "args", "minArgs", "maxArgs", "Promise", "fallbackToNoCallback", "cbError", "console", "warn", "noCallback", "wrapMethod", "method", "wrapper", "Proxy", "apply", "targetMethod", "thisObj", "call", "hasOwnProperty", "Function", "bind", "wrapObject", "wrappers", "cache", "create", "handlers", "proxyTarget", "prop", "receiver", "defineProperty", "configurable", "enumerable", "desc", "Reflect", "deleteProperty", "wrapEvent", "wrapperMap", "addListener", "listener", "hasListener", "removeListener", "onRequestFinishedWrappers", "onRequestFinished", "req", "wrappedReq", "getContent", "onMessageWrappers", "onMessage", "sender", "sendResponse", "didCallSendResponse", "wrappedSendResponse", "sendResponsePromise", "response", "result", "err", "isResultThenable", "sendPromisedResult", "msg", "error", "__mozWebExtensionPolyfillReject__", "catch", "wrappedSendMessageCallback", "reply", "wrappedSendMessage", "apiNamespaceObj", "wrappedCb", "push", "sendMessage", "staticWrappers", "devtools", "network", "onMessageExternal", "tabs", "settingMetadata", "clear", "privacy", "services", "websites", "module", "exports", "StatefulTabFrameTracker", "import_webextension_polyfill", "__toESM", "browser", "browser"]
}
